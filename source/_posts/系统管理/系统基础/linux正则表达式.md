---
title: linux正则表达式
tags:
  - 正则表达式
categories:
  - linux
date: 2019-08-05 23:32:46
---

# POSIX正则表达式
* 常见的正则表达式记法，其实都源于Perl。实际上，正则表达式从Perl衍生出一个显赫的流派，叫做PCRE（Perl Compatible Regular Expression），\d、\w、\s 之类的记法，就是这个流派的特征。但是在PCRE之外，正则表达式还有其它流派，比如下面要介绍的POSIX规范的正则表达式。
* POSIX表示可移植操作系统接口（Portable Operating System Interface of UNIX，缩写为 POSIX ），主要定义了unix系统的接口规范；相应的，POSIX正则表达式定义了类unix系统下的正则表达式规范
* POSIX定义了两种类型的正则表达式：
    - BRE(Basic Regular Expression)：基本正则表达式
        + 包含的特殊字符：`. \ [ ^ $ *`
        + grep/vim/sed使用的即是基本正则
    - ERE(Extended Regular Expressions)：扩展正则表达式
        + ERE相对于BRE多了7个特殊字符：`? + { } | ( )`；在BRE中要实现相应的功能，则需要使用转义符。
        + egrep/awk使用的即是扩展正则，同时也兼容PCRE
        + BRE和ERE(PCRE与ERE基本相同)区别

        |               功能含义               | BRE  | ERE |
        |--------------------------------------|------|-----|
        | 定义子表达式的开始                   | `\(` | (   |
        | 定义子表达式的结束                   | `\)` | )   |
        | 匹配前一个字符(子表达式)的一次或多次 | `\+` | +   |
        | 匹配前一个字符(子表达式)的零次或一次 | `\?` | ?   |
        | 大括号开始                           | `\{` | `{` |
        | 大括号结束                           | `\}` | `}` |
        | 交替匹配                             | `\1` | 1   |

* POSIX与PCRE的区别
    - POSIX字符组中，反斜线\不是用来转义的。所以POSIX方括号表示法`[\d]`只能匹配`\`和d两个字符，而不是`[0-9]`对应的数字字符。
    - POSIX与PCRE的预定义字符不同

# 元字符
* `.`：匹配任何字符，包含换行符
* `\`：转义字符
* 方括号表达式
    - `[012asdf89]`：匹配任意单个字符
    - `[^01asdf67]`：字符列表取反
    - `[a-d]`：范围表达式，等同于`[abcd]`【和地区字典排序有关】
    - 包含`]`时必须放在方括号的第一个位置
    - 包含`^`不能放在第一个位置
    - 包含`-`必须放在括号内的最后一个位置

# 预定义字符
>即，POSIX标准字符类【和地区字典无关的设置】
>主要用于补充POSIX标准不存在字符、数字等基本预定义字符【如：PCRE中存在\s \w \d等基本预定义字符】

* `[:alnum:]`：字母和数字
* `[:alpha:]`：字母
* `[:blank:]`：空格或tab
* `[:cntrl:]`：控制字符
* `[:digit:]`：数字
* `[:graph:]`：任何可看到且可打印的字符
* `[:lower:]`：小写字母
* `[:print:]`：非控制字符
* `[:space:]`：产生空白的字符
* `[:upper:]`：大写字母
* `[:xdigit:]`：十六进制数字
* `[:punct:]`：标点符号

# 边界
* ^：匹配字符串开始
* $：匹配字符串结束

# 数量词
* `*` 匹配前一个字符0或多次
* `?` 匹配前一个字符0或1次      【扩展正则示例,基本正则形式参见BRE与ERE区别】
* `+` 匹配前一个字符1或多次   【扩展正则示例】
* `{n}`  匹配前置条目n次            【扩展正则示例】
* `{n,}` 匹配前置条目至少n次   【扩展正则示例】
* `{,m}` 匹配前置条目至多m次   【扩展正则示例】
* `{n,m}` 匹配前置条目n到m次   【扩展正则示例】

# 分组
* `|`：交替匹配符号两边的内容    【扩展正则示例】
* `()`：分组                                        【扩展正则示例】
* `\n`：分组后的后向引用功能

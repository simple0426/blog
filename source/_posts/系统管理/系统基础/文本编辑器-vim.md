---
title: 文本编辑器-vim
tags:
  - vim
  - less
  - more
categories:
  - linux
date: 2019-07-15 18:28:51
---

# 简介
## 学习方式
vimtutor命令
## 主要文件
- 历史记录文件：~/.viminfo
- 配置文件：~/.vimrc

    ```
    "显示行号
    set nu
    "tab长度为4个空格
    set ts=4
    "把tab显示成空格
    set expandtab
    "自动缩进
    set autoindent
    "搜索高亮
    set hlsearch
    ```
## 命令行选项
* -o 同时编辑多个文件【ctrl+w+↑↓切换文件】
* +n 直接打开文件并定位光标到第n行

## vim模式
* [普通模式](#光标定位)：主要进行光标移动，或进行删除、复制、粘贴操作
* [编辑模式](#文本编辑)：对文本进行编辑
* [命令行模式](#命令行模式)：主要对普通模式进行输入输出操作

## 使用技巧
### 多行注释与删除  
1. ctrl+v进入块编辑模式  
2. 使用上下键选中行首  
3. 【大写i】插入#等字符进行注释或d键删除  
4. Esc退出，wq保存

# 光标定位
>普通模式下操作

* 光标任意移动：n(↑↓←→) 移动n个位置
* 移动光标到`( [ {`另一半出现的位置（当光标在`( [ {`这几个括号上时）： %
* 向右移动n个字符位置：n space：
* 移动光标到行首：^、0、home
* 移动光标到行尾：$、end
* 移动光标到单词结束：e
* 移动光标到下个单词开始：w
* 移动光标到文件首行：gg（ngg/nG移动到第n行）
* 移动光标到文件尾行：G
* 多行选择：先按__Shift + v__后,使用上下键选中多行操作
* 区块选择
    - v：对光标以前的所有行的区块进行选择
        + 【v :w filename】将区块选择内容保存到filename中
    - ctrl+v：对光标左上的区块进行选择

# 文本编辑
>普通模式下操作；或普通模式使用i、o、a等进入编辑模式下操作(编辑模式使用Esc退回到普通模式)

* 单字符操作
    + x、delete：删除光标下字符
    + rx：替换当前光标字符为字符x
* 增加
    - i：光标前添加内容
    - I：当前行首添加内容
    - a：光标后添加内容
    - A：当前行尾添加内容
    - o：光标的下一行添加内容
    - O：光标的上一行添加内容
* 删除：d(delete)
    +  dw：删除内容到下一个单词开始
        *  d2w：删除两个单词
    +  de：删除内容到单词末尾
    +  d$/d^：删除内容到行尾、行首
    +  dd：删除当前行
        *  2dd：删除2行
* 替换：c(change)
    + ce：替换单词【删除原单词，并进入编辑模式】
    + c0、c$：替换光标至行首或行尾内容【删除原内容，并进入编辑模式】
* 复制：y(yank)
    + yy：复制一行
    + 5yy：复制5行
    + y$：复制到行尾内容
* 粘贴：p(paster)【将最近删除或复制的内容放入当前光标所在的下一行】
* 撤销操作：u(undo) 撤销最后一个命令的操作
    + 多个u撤销最近n个操作
    + ctrl+r：撤销最近一次撤销的动作
    + U：恢复一行到修改前状态

# 命令行模式
>普通模式使用【:、/、?】符号进入命令行模式(命令行模式下使用Esc退回到普通模式)

* 搜索
    - /word：普通模式下默认向后搜索文本
    - n、N：显示文本下一次【上一次】出现的位置
    - ?word：普通模式下默认向前搜索文本
* 替换
    - :s/old/new 将当前行第一次出现的old替换为new
    - :s/old/new/g 将当前行出现的old都替换为new
    - :n,ms/old/new/g 将n到m行出现的old都替换为new
    - :%s/old/new/g 将当前文件出现的old都替换为new
    - %s/old/new/gc 将当前文件出现的old都替换为new，每个替换都进行交互提示
* 输入输出
    - `:w`：保存(:w! 强制保存)
    - `:q`：退出(:q! 强制退出)
    - `:wq`：保存修改并退出(:wq! 强制保存退出)
    - `:w filename`：保存当前文件到filename
    - `n,m w file2`：将当前文件的n到m行保存为file2
    - `:r filename`：读入filename文件内容到光标的下一行
    - `:r !command`：读取命令行输出到光标的下一行
    - `:e file2`：跳出当前文件，另行编辑file2文件
    - `:! command`：执行shell或cmd命令
* 帮助与设置
    - `:help`：帮助信息
    - `set nu/set nonu`：设置行号

# less
查看文件内容，类似命令有more，但是less比more强大

* space：换屏输出
* ↑↓：换行输出
* /string：向下搜索
* ?string：向上搜索
* n：下一个匹配字符串
* N：上一个匹配字符串
* q：退出查看模式

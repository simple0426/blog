---
title: 字符串操作
tags:
  - 编码
  - 格式化
  - 字符串
date: 2018-05-02 18:04:10
categories: ['python']
---

# 编码
## 通用编码
* ASCII[1个字节] 只支持英文字母和一些常用的符号
* Unicode[2个字节]
* UTF-8 把一个Unicode字符根据不同的数字大小编码成1-6个字节
    - 常用的英文字母被编码成1个字节，汉字通常是3个字节，只有很生僻的字符才会被编码成4-6个字节
    - ASCII编码实际上可以被看成是UTF-8编码的一部分

## 中文编码
* gb2312
    - GB2312(1980年)一共收录了7445个字符，在windows中的代码页是CP936
    - 原来的CP936和GB 2312-80一模一样
* gbk
    - GBK最初是由微软对GB2312的扩展，也就是CP936字码表 (Code Page 936)的扩展
    - gbk并非国家正式标准
* GB18030
    - GB18030取代了GBK1.0的正式国家标准。该标准收录了27484个汉字，同时还收录了藏文、蒙文、维吾尔文等主要的少数民族文字。
    - 现在的PC平台必须支持GB18030，GB18030在windows中的代码页是CP54936。

## python2与python3
* python3
    - str即为unicode
    - bytes即为str.encode()的结果
* python2
    - str是bytes
    - u'str'为unicode

## str与bytes转换
>python3下

* 在内存中，统一使用unicode编码，数据为str类型
* 如果数据需要在网络上传输或保存到硬盘上，就需要把str变成bytes，使用encode方法
* 反之，如果我们从网络或磁盘读取了字节流，需要使用decode方法将数据由bytes类型转换为str类型

## 单字符的编码
* ord()函数获取字符的整数表示
    - print(ord('中'))
* chr()函数把编码转换为对应的字符
    - print(chr(20013))

# 字符串方法
* isdigit：判断是否为数字型字符串
* istitle：判断首字母是否大写
* isidentifier：变量名有效性判断

```python
n = 'temp'
v = n.isidentifier()
print(v)
```

* capitalize：使字符串首字母大写
* upper/lower：字符串变大小写
* startswith/endswith：判断是否以某字符开头或结束

```python
s = 'abcd'
s.startswith('a')
s.endswith('d')
```

* strip：移除空白或字符串

```python
m = ' abc '
m.lstrip() #移除左侧空白
m.rstrip()
m.strip() #移除两端空白
n = 'abc'
n.strip('c') #移除字符c
```

* split：切割
* splitlines：按行分割

```python
a = 'a|123|3'
a.split('|') #默认以空格分割，只能是单字符分隔符
```

* replace：替换

```python
n = 'ab12c'
n.replace('a', '3') #替换所有字符
n.replace('a', '3', 1) #只替换第一个字符
```

* center：字符串居中

```python
st = 'oldboy'
v = st.center(10, '#')
print(v)
```

* encode：编码

```python
name = '测试'
print(name.encode('utf-8'))
print(name.encode('gbk'))
```

* format：格式化[ke/value传递]
* format_map：字典传递

```python
ori = 'my name is {name}, my age is {age}'
a = {'name': 'he', 'age': 28}
ori.format_map(a)
```

* maketrans/translate：翻译和替换

```python
m = str.maketrans('123', 'abc')
v = '12345'
n = v.translate(m)
print(n)
```

* join：拼接

```python
a = '123'
b = '23' 
c = a.join(b)
d = a + b #字符串拼接
e = a*2 #重复a字符串2次
```
```python
# join拼接可以迭代的对象，比如字符串、列表等 
In [22]: '|'.join(['ab', 'dd', 'cf']) 
Out[22]: 'ab|dd|cf'  
```
# 子串判断
```python
if a in b: #如果a在b中
    print(a)
if a is b: #如果a和b相等
    print('ok')
```
# 索引和切片
```python
a = "abcd"
print(a[1], a[::2]) # 取第2个元素；从第一次元素开始，每隔一个取一个元素。
```

# 格式化
## 占位符
* %d 十进制整数
* %s 字符串
* %f 浮点数
* %x 十六进制数
* %o 八进制数

## 百分号方式
```python
print('my name is %s,my age is %d' % ('he', 29))
```

## format方式
* 字符串索引方式
    - `'my name is {name}, my age is {age}'.format(name='he', age=29)`
* 数字索引方式
    - `'my name is {1}, my age is {0}'.format(29, 'he')`

# 数字格式化
## 小数一般处理
round(3.16, 1) #保留一位小数，按四舍五入处理

## 数字的格式化处理

| 填充符号 | 对其方式 | 符号 |   宽度   |   精度   | 数据类型 |
|----------|----------|------|----------|----------|----------|
| 任意字符 | ><=^     | +-   | 任意数字 | 任意数字 | 占位符   |

```python
"{:*>+10.3f}".format(34)
"{:0=+10.3f}".format(34)
'{a}\'long format is {a:0=+10.2f}'.format(a=34)
"The number {1} in hex is:{1:#x}, the number {0} in oct is {0:#o}".format(45, 4746)
```

# 元组格式化
```python
tup = ('xiaomeng', 'jingqi')
print('list is %s' % (tup,))
'list is {}'.format(tup)
```

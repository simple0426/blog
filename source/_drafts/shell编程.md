---
title: shell编程
tags:
categories:
---
# 管道命令
* cmd1|cmd2：将cmd1命令的标准输出传递给cmd2的标准输入
* cmd1|&cmd2：【|&等同于2>&1 |】将cmd1的标准输出和错误输出都传递给cmd2
* 管道中的每个命令都在单独的进程中执行【subshell】

# 命令列表
* &会将命令放入后台执行
* 以“;”分隔的命令会顺序执行，shell等待每个命令执行完成
* cmd1&&cmd2 逻辑“与”连接两个命令，cmd1执行成功后才执行cmd2
* cmd2||&&cmd2 逻辑“或”连接两个命令，cmd2执行不成功才执行cmd2

# 复合命令
* (list)：开启一个子shell执行命令列表
    - 其他开启子shell的方法：&（后台执行）、|（管道执行）
* { list; }：内部分组，这个结构事实上创建了一个匿名函数。大括号内的命令不会开启一个子shell运行。括号内的命令用分号分隔，最后一个也要用分号，第一个命令和左括号之间必须要有一个空格。
* ((expression))：和let表达式一样，用于数学运算，例如：echo $((5+4))
* `[[ expression ]]`：用于条件测试
* `for name [ [ in [ word ... ] ] ; ] do list ; done`：循环列表中的内容
* `for((expr1;expr2;expr3))`：条件循环；expr1为初始值，expr2为终止条件，expr为循环条件。
    - 范例：for((a=50;a>=0;a--));do echo $a;done
* `select name [in word];do list;done`：交互式选择列表中的项目
    - 范例：`select name in a b c;do echo $name;done `


## 条件判断
>test、`[]`、`[[]]`之间比较

* `[]`等价于test命令，是bash内建命令
* `[[]]`是扩展测试命令，[[是关键字
* `[[]]`结构比`[]`结构更加通用，这是一个扩展的test命令
* 在`[[和]]`之间所有的字符都不会发生文件名扩展或单词分隔，但是会发生参数扩展和命令替换
* 使用`[[...]]`条件判断结构，而不是`[...]`,能够防止脚本中的许多逻辑错误，例如&&、||、>、<操作符能够正常存在于`[[]]`中，但是不能出现在`[]`结构中会报错

### 数值比较
| test或`[]` |  `[[]]` | (()) |   含义   |
|------------|---------|------|----------|
| -eq        | =、-eq  | =    | 等于     |
| -ne        | !=、-ne | !=   | 不等于   |
| -gt        | >、-gt  | >    | 大于     |
| -ge        | >=、ge  | >=   | 大于等于 |
| -lt        | <、-lt  | <    | 小于     |
| -le        | <=、-le | <=   | 小于等于 |

### 逻辑连接
| test或`[]` | `[[]]` | 含义 |
|------------|--------|------|
| -a         | &&     | 与   |
| -o         | 11     | 或   |
| ！         | ！     | 非   |

## 数学计算
* (())：echo $((5+4))
* `[]`：echo $[5+4]
* `expr 1 + 4`：空格分隔
* declare：`declare -i i=2;i=i+3;echo $i`
* let：`let a=3+2;echo $a`
* bc：`echo 5+4|bc`
